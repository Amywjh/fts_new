function sysPar(){this.starToJewel=10,this.prizeStart="8:00"}function toThousands(e){var t=[],n=0;e=(e||0).toString().split("");for(var a=e.length-1;a>=0;a--)n++,t.unshift(e[a]),n%3||0==a||t.unshift(",");return t.join("")}function lineup_qudh(e,t){if(10>e){var n=e;t.numone="./img2.0/players/"+n+".png"}else{var a=Math.floor(e/10),r=Math.floor(e%10);t.numone="./img2.0/players/"+a+".png",t.numtwo="./img2.0/players/"+r+".png"}return t}function getReward(e,t,n){function a(e){return parseInt(n*t*9*(2*t/4-2*e+1)/(t/4)/(t/4))}var r=[];return void 0!=e&&t&&n?4==e||3==e?(r.push(18*n),r):0==e?(r.push(n*t*9),r):1==e?3>t?r:(r.push(parseInt(n*t*9/2)),r.push(parseInt(n*t*9/3)),r.push(parseInt(n*t*9/6)),r):2==e?4>t?r:(r.push(a(1)),r.push(a(2)),r.push(a(3)),r):r:!1}function getChartData(e){if(!e||e.length<5)return!1;var t=[],n=[];return angular.forEach(e,function(e,a){t.push(e.expression),n.push(a+1)}),{series:t,xAxis:n}}function getParam(e){for(var t=location.search.substring(1),n=t.split("&"),a=0;a<n.length;a++){var r=n[a].split("=");if(r[0]==e)return r[1]}return""}function setNum(e,t,n,a){if(1==a){var r=0|$("#vote_num").val();$("#vote_num").val(r),r>e&&$("#vote_num").val(r-1)}else if(2==a){var r=0|$("#vote_num").val();$("#vote_num").val(r),void 0!=n?n>r&&$("#vote_num").val(r+1):$("#vote_num").val(r+1),r>=t&&($("#vote_num").val(t),n&&t>n&&$("#vote_num").val(n))}return $("#vote_num").val()}function getVal(e,t,n,a){if(a||0==a){var r=new RegExp("^[1-9]{1}[0-9]*$"),o=r.test(e.target.value);if(!o){var i=0|e.target.value;e.target.value=i}if(e.target.value>n||e.target.value>a){var s=a>n?n:a;e.target.value=s}}else e.target.value>n&&(e.target.value=n)}function getPreIncome(e,t,n,a,r){var o,i=(t+n+a)*e;if(!t)return o=!1;if(r){if(!a)return o=!1;o=i*t/(t+n),10*t>o&&(o=10*t)}else{if(!n)return o=!1;o=i*t/(t+a),10*t>o&&(o=10*t)}return o=Math.round(o)}function convertImgToBase64(e,t,n){var a=document.createElement("CANVAS"),r=a.getContext("2d"),o=new Image;o.crossOrigin="Anonymous",o.src=e,o.onload=function(){a.height=o.height,a.width=o.width,r.drawImage(o,0,0);var e=a.toDataURL(n||"image/png");t.call(this,e),a=null}}function card(e){for(var t="",n=0;n<e.length-8;n++)t+="*";return e.replace(/^(\d{4})\d+(\d{4})$/,"$1"+t+"$2")}function loseTime(e){var t=new Date,n=t.getTime()-e;return n>6048e5?!0:!1}function getTimeCount(e){var t=new Date,n=e-t.getTime();if(n>0){var a=Math.floor(n/1e3/60/60/24),r=Math.floor(n/1e3/60/60%24),o=Math.floor(n/1e3/60%60);return{dates:a,hours:r,minutes:o}}return!1}function matchDeadTime(e){if(e.length>0)for(var t=0;t<e.length;t++){var n=getTimeCount(e[t].deadTime);if(n){var a="";n.dates&&(a=a+n.dates+"天"),n.hours&&(a=a+n.hours+"时"),n.minutes&&(a=a+n.minutes+"分"),""==a&&delete a,e[t].timeCount=a}else e[t].timeCount=null}return e}function getCountTime(e){var t=getTimeCount(e),n="<img class='a-img-size' src='../../img2.0/prize2.0/qxdz_djs_1.png' alt='' /> ";return t?(t.dates&&(n+=t.dates+"<span style='font-size: 0.12rem;font-weight: normal;color: #fff;'>&nbsp;天&nbsp;</span>"),t.hours&&(n+=t.hours+"<span style='font-size: 0.12rem;font-weight: normal;color: #fff;'>&nbsp;时&nbsp;</span>"),t.minutes&&(n+=t.minutes+"<span style='font-size: 0.12rem;font-weight: normal;color: #fff;'>&nbsp;分&nbsp;</span>"),n):n+=0}function getDay(e){var t,n=864e5,a=new Date;a.setHours(0,0,0,0);var r=new Date(a.getTime()).getTime()+n,o=e-r;if(0>o)t="今日";else if(o>=0&&n>o)t="明日";else{var i=new Date(e),s=new Array(7);s[0]="星期日",s[1]="星期一",s[2]="星期二",s[3]="星期三",s[4]="星期四",s[5]="星期五",s[6]="星期六",t=s[i.getDay()]}var u=new Date(e).getHours(),l=new Date(e).getMinutes();return{day:" ("+t+") ",hourMinutes:u+":"+l}}function add0(e){return 10>e?"0"+e:e}function gettimeform(e,t){var n=new Date;n.setTime(e);var a=!1;if(isNaN(n.setTime(e)))return{years:"00",month:"00",dates:"00",hours:"00",minutes:"00",isNextDay:a};{var r=n.getFullYear(),o=n.getMonth()+1,i=n.getDate(),s=n.getHours(),u=n.getMinutes();n.getSeconds()}if(t){var l=new Date;l.setTime(t);var c=l.getDate(),m=l.getMonth()+1;(i-c==1||o-m==1&&1==i&&i-c>=27)&&(a="次日 ")}return{years:r,month:add0(o),dates:add0(i),hours:add0(s),minutes:add0(u),isNextDay:a}}function commafyback(e){var t=e.split(",");return parseFloat(t.join(""))}function jsRequire(e,t){jsAll[e]||(jsAll[e]=require([e],function(n){return t&&t(),"wx"==e?(window.wx=n,window.wx):void 0}))}function TALKWATCH(e,t,n){try{TDAPP.onEvent(e,t,n)}catch(a){jsRequire("talkData")}}function getUserId(e){$.ajax({url:"/api/v2/wechat/weChatLogin?token="+getParam("code"),type:"POST",success:function(t){return t.data&&0==t.code?(localStorage.setItem("userId",t.data.id),sessionStorage.setItem("userId_short",t.data.id),e.defaults.headers.common.uk=t.data.id,void weixinAddContact(t.data.nickName)):(localStorage.removeItem("userId"),localStorage.removeItem("nickName"),sessionStorage.removeItem("user"),!1)},error:function(){localStorage.removeItem("userId"),localStorage.removeItem("nickName"),sessionStorage.removeItem("user")}})}function loadDefaultImg(e){var t=event.srcElement;t.src=e?"../../img2.0/common/touxiang_default.png":"../../img2.0/common/player_default.png",t.onerror=null}function privateWxConfig(e,t,n){try{wx.config({debug:t?!0:!1,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:e.jsApiList})}catch(a){setTimeout(function(){jsRequire("wx",n)},500)}}function wxShare(e,t,n){try{wx.ready(function(){wx.onMenuShareTimeline({title:e.title,link:e.url,imgUrl:"https://"+e.img,success:function(){n&&n()},cancel:function(){}}),wx.onMenuShareAppMessage({title:e.title,desc:e.desc,link:e.url,imgUrl:"https://"+e.img,type:"",dataUrl:"",success:function(){n&&n()},cancel:function(){}})}),wx.error(function(){})}catch(a){setTimeout(function(){jsRequire("wx",t)},1e3)}}function weixinAddContact(e){document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.invoke("addContact",{webtype:"1",username:e},function(e){"add_contact:added"==e.err_msg||"add_contact:ok"==e.err_msg})},!1)}function getRectCanvas(e){var t=document.createElement("canvas"),n=t.getContext("2d"),a=e.width,r=e.height;return t.width=a,t.height=r,n.imageSmoothingEnabled=!0,n.drawImage(e,0,0,a,r),n.globalCompositeOperation="destination-in",n.beginPath(),n.rect(0,0,a,r),n.fill(),t}function dataURLtoBlob(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],a=atob(t[1]),r=a.length,o=new Uint8Array(r);r--;)o[r]=a.charCodeAt(r);return new Blob([o],{type:n})}$(function(){$("#online .break").click(function(){navigator.onLine?(window.location.reload(),$("#online").css("display","none")):$("#online").find("p").text("再试一次")})});var jsAll={};